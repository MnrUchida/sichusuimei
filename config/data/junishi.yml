ANGLE:
 gou:
  name: 支合
  default_method: -angle
  method:
   - define: nil
     target:
      - ne
      - usi
      - uma
      - hitsuji

 kei:
  name: 刑
  method:
   - define: angle + ANGLE_RIGHT
     target:
      - ne
      - tora
      - mi
   - define: angle - ANGLE_RIGHT
     target:
      - usi
      - u
      - inu
   - define: angle + ANGLE_HALF_CIRCLE
     target:
      - saru
   - define: angle - ANGLE_HALF_CIRCLE
     target:
      - hitsuji
   - define: angle
     target:
      - tatsu
      - uma
      - tori
      - i
 chu:
  name: 冲
  default_method: angle + ANGLE_HALF_CIRCLE

 ha:
  name: 破
  default_method: angle - ((angle % ANGLE_DOUBLE_SHI) - ANGLE_SHI) * SHI_COUNT / 2

 gai:
  name: 害
  default_method: -(angle + ANGLE_HALF_CIRCLE)

 sangou:
  name: 三合
  default_method: angle + ANGLE_CIRCLE / 3

 kagai:
  name: 華蓋
  default_method: angle * -3 + ANGLE_DOUBLE_SHI

 tenmou:
  name: 天耗
  default_method: angle * 2 - (ANGLE_HALF_SHI + ANGLE_RIGHT)

 chimou:
  name: 地耗
  default_method: self.tenmou_angle - ANGLE_RIGHT

 byakui:
  name: 白衣
  method:
   - define: angle + ANGLE_RIGHT
     target:
      - tora
      - mi
      - saru
      - i
   - define: angle - ANGLE_RIGHT
     target:
      - ne
      - u
      - uma
      - tori
   - define: angle + ANGLE_RIGHT + (angle - ANGLE_HALF_SHI) * 2
     target:
      - usi
      - tatsu
      - hitsuji
      - inu

 kessi:
  name: 血支
  default_method: angle - ANGLE_CIRCLE / 3

 dankyo:
  name: 断橋
  method:
   - define: angle
     target:
      - ne
      - tora
      - u
   - define: angle - ANGLE_CIRCLE / 6
     target:
      - usi
   - define: angle + ANGLE_CIRCLE / 3
     target:
      - tatsu
      - uma
   - define: angle - ANGLE_CIRCLE / 3
     target:
      - mi
      - saru
      - tori
      - inu
      - i
   - define: angle + ANGLE_CIRCLE / 6
     target:
      - hitsuji

 ekiba:
  name: 駅馬
  default_method: (angle + ANGLE_HALF_SHI) * 9 + ANGLE_DOUBLE_SHI - ANGLE_HALF_SHI

 momon:
  name: 喪門
  default_method: angle + ANGLE_DOUBLE_SHI

 sinjin_shi:
  name: 進神
  default_method: revise_angle((four_season_by_angle(angle) * 2 + two_season_by_angle(angle)) * ANGLE_RIGHT)

 tensha_shi:
  name: 天赦
  default_method: revise_angle((four_season_by_angle(angle + ANGLE_RIGHT) % 2) * ANGLE_DOUBLE_SHI + two_season_by_angle(angle + ANGLE_RIGHT) * ANGLE_HALF_CIRCLE)

 zahai_1_shi:
  name: 座敗
  default_method: revise_angle((2 ** four_season_by_angle(angle + ANGLE_HALF_CIRCLE) + two_season_by_angle(angle + ANGLE_HALF_CIRCLE)) * ANGLE_SHI)

 zahai_2_shi:
  name: 座敗
  default_method: revise_angle(( two_season_by_angle(angle + ANGLE_HALF_CIRCLE) * 7 + two_season_by_angle(angle * 2) + 1 ) * ANGLE_SHI)

 zahai_3_shi:
  name: 座敗
  default_method: revise_angle( (four_season_by_angle(angle - ANGLE_RIGHT) * two_season_by_angle(angle) + two_season_by_angle(angle + ANGLE_HALF_CIRCLE) * 3 + two_season_by_angle(angle + ANGLE_RIGHT) * 6 ) * ANGLE_SHI)

 tenten_shi:
  name: 天転
  default_method: revise_angle((four_season_by_angle(angle) + 1) * ANGLE_RIGHT)

METHOD:
 tentoku_kijin:
  name: 天徳貴人
  method:
   - define: Junishi.by_angle((angle + ANGLE_SHI * 5) % ANGLE_CIRCLE)
     target:
      - ne
      - u
      - uma
      - tori
   - define: Zoukan.by_angle((angle - 12 + ANGLE_SHI * 5) % ANGLE_CIRCLE).jikkan
     target:
      - tora
      - mi
      - saru
      - i
   - define: Zoukan.by_angle((angle - 20 + ANGLE_SHI * 5) % ANGLE_CIRCLE).jikkan
     target:
      - usi
      - tatsu
      - hitsuji
      - inu

 tentoku_gou:
  name: 天徳合
  default_method: tentoku_kijin.gou

 tentoku_kijin?:
  name: 天徳貴人
  default_method: target.tenkan.name == self.tentoku_kijin.name
  method:
   - define: target.chishi.name == self.tentoku_kijin.name
     target:
      - ne
      - u
      - uma
      - tori
 tentoku_gou?:
  name: 天徳合
  default_method: target.tenkan.name == self.tentoku_gou.name
  method:
   - define: target.chishi.name == self.tentoku_gou.name
     target:
      - ne
      - u
      - uma
      - tori

 gettoku_kijin:
  name: 月徳貴人
  default_method: Gogyo.shidai(self.code % 4).you_kan

 gettoku_kijin?:
  name: 月徳貴人
  default_method: target.name == self.gettoku_kijin.name

 gettoku_gou:
  name: 月徳合
  default_method: gettoku_kijin.gou

 gettoku_gou?:
  name: 月徳合
  default_method: target.name == self.gettoku_gou.name

 gekku:
  name: 月空
  default_method: Gogyo.shidai((self.code + 2) % 4).you_kan

 gekku?:
  name: 月空
  default_method: target.name == self.gekku.name

 seiseiba?:
  name: 生成馬
  method:
   - define: (ekiba?(target.chishi) && target.tenkan.code == (6 - 3 * ((self.code + 2) % 4)))
     target:
      - ne
      - tora
      - u
      - tatsu
      - uma
      - hitsuji
      - saru
      - inu
      - i
   - define: (ekiba?(target.chishi) && target.tenkan.code == 7)
     target:
      - usi
      - mi
      - tori
 tentoku:
  name: 天徳
  default_method: return tentoku_kijin, tentoku_gou

METHOD_JIKKAN:
 sinjin_kan:
  name: 進神
  default_method: two_season_by_angle(angle) * (Jikkan::JIKKAN_COUNT / 2)

 tensha_kan:
  name: 天赦
  default_method: (four_season_by_angle(angle + ANGLE_RIGHT) % 2) * Jikkan.by_key('tsuchinoe').code

 zahai_1_kan:
  name: 座敗
  default_method: four_season_by_angle(angle) + two_season_by_angle(angle)

 zahai_3_kan:
  name: 座敗
  default_method: ( two_season_by_angle(angle + ANGLE_RIGHT) * 2 + two_season_by_angle(angle)) ** 2 + two_season_by_angle(angle * 2) * 3

 zahai_4_kan:
  name: 座敗
  default_method: (four_season_by_angle(angle + ANGLE_RIGHT) ** two_season_by_angle(angle + ANGLE_HALF_CIRCLE) + two_season_by_angle(angle) * 2) * (3 ** two_season_by_angle(angle + ANGLE_RIGHT)) + two_season_by_angle(angle * 2)

 tenten_kan:
  name: 天転
  default_method: two_season_by_angle(angle * 2) + two_season_by_angle(angle) * 6 + 1

JUNISHI:
 ne:
  member:
   angle: 345
   name: 子
   code: 0

 usi:
  member:
    angle: 15
    name: 丑
    code: 1

 tora:
  member:
    angle: 45
    name: 寅
    code: 2

 u:
  member:
    angle: 75
    name: 卯
    code: 3

 tatsu:
  member:
    angle: 105
    name: 辰
    code: 4

 mi:
  member:
    angle: 135
    name: 巳
    code: 5

 uma:
  member:
    angle: 165
    name: 午
    code: 6

 hitsuji:
  member:
    angle: 195
    name: 未
    code: 7

 saru:
  member:
    angle: 225
    name: 申
    code: 8

 tori:
  member:
    angle: 255
    name: 酉
    code: 9

 inu:
  member:
    angle: 285
    name: 戌
    code: 10

 i:
  member:
    angle: 315
    name: 亥
    code: 11

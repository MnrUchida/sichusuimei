ANGLE:
 gou:
  name: 支合
  default_method: (@angle * -1)
  method:
   - define: nil
     target:
      - ne
      - usi
      - uma
      - hitsuji

 kei:
  name: 刑
  method:
   - define: (@angle.with_shi(3))
     target:
      - ne
      - tora
      - mi
   - define: (@angle.with_shi(-3))
     target:
      - usi
      - u
      - inu
   - define: (@angle.with_shi(6))
     target:
      - saru
   - define: (@angle.with_shi(-6))
     target:
      - hitsuji
   - define: (@angle)
     target:
      - tatsu
      - uma
      - tori
      - i
 chu:
  name: 冲
  default_method: (@angle.with_shi(6))

 ha:
  name: 破
  default_method: (@angle - @angle.mod_shi(2).with_shi(-1) * (SHI_COUNT / 2))

 gai:
  name: 害
  default_method: self.chu_angle * -1

 sangou:
  name: 三合
  default_method: (@angle.with_shi(4))

 kagai:
  name: 華蓋
  default_method: (@angle * -3).with_shi(2)

 tenmou:
  name: 天耗
  default_method: (@angle * 2).with_shi(-3).with_shi(-0.5)

 chimou:
  name: 地耗
  default_method: self.tenmou_angle.with_shi(-3)

 byakui:
  name: 白衣
  method:
   - define: (@angle.with_shi(3))
     target:
      - tora
      - mi
      - saru
      - i
   - define: (@angle.with_shi(-3))
     target:
      - ne
      - u
      - uma
      - tori
   - define: (@angle * 3).with_shi(2)
     target:
      - usi
      - tatsu
      - hitsuji
      - inu

 kessi:
  name: 血支
  default_method: (@angle.with_shi(-4))

 dankyo:
  name: 断橋
  method:
   - define: (@angle)
     target:
      - ne
      - tora
      - u
   - define: (@angle.with_shi(-2))
     target:
      - usi
   - define: (@angle.with_shi(4))
     target:
      - tatsu
      - uma
   - define: (@angle.with_shi(-4))
     target:
      - mi
      - saru
      - tori
      - inu
      - i
   - define: (@angle.with_shi(2))
     target:
      - hitsuji

 ekiba:
  name: 駅馬
  default_method: (@angle * 9).with_shi(6)

 momon:
  name: 喪門
  default_method: (@angle.with_shi(2))

 sinjin_shi:
  name: 進神
  default_method: (@angle.four_season * 2 + @angle.two_season).multi_shi(3).revise

 tensha_shi:
  name: 天赦
  default_method: ((@angle.with_shi(3).four_season % 2) + @angle.with_shi(3).two_season * 3).multi_shi(2).revise

 zahai_1_shi:
  name: 座敗
  default_method: (@angle.with_shi(6).two_season + 2 ** @angle.with_shi(6).four_season.to_i).multi_shi(1).revise

 zahai_2_shi:
  name: 座敗
  default_method: (@angle.with_shi(6).two_season * 7 + (@angle * 2).two_season + 1).multi_shi(1).revise

 zahai_3_shi:
  name: 座敗
  default_method: (@angle.with_shi(-3).four_season * @angle.two_season + @angle.with_shi(6).two_season * 3 + @angle.with_shi(3).two_season * 6 ).multi_shi(1).revise

 tenten_shi:
  name: 天転
  default_method: (@angle.four_season + 1).multi_shi(3).revise

 chiten_shi:
  name: 地転
  default_method: self.tenten_shi_angle

 tensatsu_shi:
  name: 天殺
  default_method: self.tenten_shi_angle

 happu_1_shi:
  name: 八風
  default_method: (@angle).four_season.multi_shi(3).with_shi(1).revise

 happu_2_shi:
  name: 八風
  default_method: self.happu_1_shi_angle.with_shi(4)

 shihai_1_shi:
  name: 四廃
  default_method: shihai_2_shi_angle.with_shi(-1)

 shihai_2_shi:
  name: 四廃
  default_method: (@angle.four_season - 1).multi_shi(3).revise

 bouhai_1_shi:
  name: 暴敗
  default_method: (@angle.with_shi(6).two_season + (@angle * 2).with_shi(6).two_season * 3 + 1).multi_shi(2).revise

METHOD:
 tentoku_kijin:
  name: 天徳貴人
  method:
   - define: Junishi.by_angle( @angle.with_shi(5).in_circle)
     target:
      - ne
      - u
      - uma
      - tori
   - define: Zoukan.by_angle( (@angle - 12).with_shi(5).in_circle).jikkan
     target:
      - tora
      - mi
      - saru
      - i
   - define: Zoukan.by_angle( (@angle - 20).with_shi(5).in_circle).jikkan
     target:
      - usi
      - tatsu
      - hitsuji
      - inu

 tentoku_gou:
  name: 天徳合
  default_method: tentoku_kijin.gou

 tentoku_kijin?:
  name: 天徳貴人
  default_method: target.tenkan.name == self.tentoku_kijin.name
  method:
   - define: target.chishi.name == self.tentoku_kijin.name
     target:
      - ne
      - u
      - uma
      - tori
 tentoku_gou?:
  name: 天徳合
  default_method: target.tenkan.name == self.tentoku_gou.name
  method:
   - define: target.chishi.name == self.tentoku_gou.name
     target:
      - ne
      - u
      - uma
      - tori

 gettoku_kijin:
  name: 月徳貴人
  default_method: Gogyo.shidai(self.code % 4).you_kan

 gettoku_kijin?:
  name: 月徳貴人
  default_method: target.name == self.gettoku_kijin.name

 gettoku_gou:
  name: 月徳合
  default_method: gettoku_kijin.gou

 gettoku_gou?:
  name: 月徳合
  default_method: target.name == self.gettoku_gou.name

 gekku:
  name: 月空
  default_method: Gogyo.shidai((self.code + 2) % 4).you_kan

 gekku?:
  name: 月空
  default_method: target.name == self.gekku.name

 seiseiba?:
  name: 生成馬
  method:
   - define: (ekiba?(target.chishi) && target.tenkan.code == (6 - 3 * ((self.code + 2) % 4)))
     target:
      - ne
      - tora
      - u
      - tatsu
      - uma
      - hitsuji
      - saru
      - inu
      - i
   - define: (ekiba?(target.chishi) && target.tenkan.code == 7)
     target:
      - usi
      - mi
      - tori
 tentoku:
  name: 天徳
  default_method: return tentoku_kijin, tentoku_gou

METHOD_JIKKAN:
 sinjin_kan:
  name: 進神
  default_method: (@angle.two_season.to_i) * (Jikkan::JIKKAN_COUNT / 2)

 tensha_kan:
  name: 天赦
  default_method: (@angle * 2).with_shi(6).two_season.to_i * Jikkan.by_key('tsuchinoe').code

 zahai_1_kan:
  name: 座敗
  default_method: (@angle.four_season + @angle.two_season).to_i

 zahai_3_kan:
  name: 座敗
  default_method: (@angle.with_shi(3).two_season * 2 + @angle.two_season).to_i ** 2 + ((@angle * 2).two_season * 3).to_i

 zahai_4_kan:
  name: 座敗
  default_method: (@angle.with_shi(3).four_season.to_i ** @angle.with_shi(6).two_season.to_i + (@angle.two_season * 2).to_i ) * (3 ** @angle.with_shi(3).two_season.to_i) + (@angle * 2).two_season.to_i

 tenten_kan:
  name: 天転
  default_method: (@angle * 2).two_season.to_i + @angle.two_season.to_i * 6 + 1

 chiten_kan:
  name: 地転
  default_method: ((@angle.with_shi(3).two_season + 1) * 2 + (@angle * 2).with_shi(6).two_season * 5).to_i

 tensatsu_kan:
  name: 天殺
  default_method: (@angle.with_shi(-3).two_season * 2 + 1).to_i * ((@angle * 2).with_shi(6).two_season + 2).to_i

 happu_kan:
  name: 八風
  default_method: (@angle * 2).with_shi(6).two_season.to_i * Jikkan.by_key('hinoto').code

 shihai_1_kan:
  name: 四廃
  default_method: ((@angle.four_season.to_i + 3) % Gogyo::GOGYO_COUNT) * 2

 shihai_2_kan:
  name: 四廃
  default_method: 2 ** ((@angle.four_season + 1) * @angle.with_shi(6).two_season * 2).to_i + @angle.with_shi(6).two_season.to_i * 3

JUNISHI:
 ne:
  member:
   angle: 345
   name: 子
   code: 0

 usi:
  member:
    angle: 15
    name: 丑
    code: 1

 tora:
  member:
    angle: 45
    name: 寅
    code: 2

 u:
  member:
    angle: 75
    name: 卯
    code: 3

 tatsu:
  member:
    angle: 105
    name: 辰
    code: 4

 mi:
  member:
    angle: 135
    name: 巳
    code: 5

 uma:
  member:
    angle: 165
    name: 午
    code: 6

 hitsuji:
  member:
    angle: 195
    name: 未
    code: 7

 saru:
  member:
    angle: 225
    name: 申
    code: 8

 tori:
  member:
    angle: 255
    name: 酉
    code: 9

 inu:
  member:
    angle: 285
    name: 戌
    code: 10

 i:
  member:
    angle: 315
    name: 亥
    code: 11
